<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HASH STATE</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background-color: gray;
      font-size: 3vh;
    }

    #root {
      display: flex;
      flex-direction: column;
      width: 100vw;
      height: 100vh;
    }

    #head {
      width: 100vw;height: 10vh;background-color: gray;display: flex;flex-direction: row;text-align: center;justify-content: center;align-items: center;
    }

    #board {
      width: 100vw;height: 90vh;background-color: darkgray;display: flex;flex-direction: row;justify-content: center;align-items: center;
    }

    #home {
      width: 25vw;
      cursor: pointer;
      margin: auto;
    }

    #team {
      width: 25vw;
      cursor: pointer;
    }

    #member {
      width: 25vw;
      cursor: pointer;
    }

    #purpose {
      width: 25vw;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div id="root">
    <div id="head"><!-- Will dynamically add MenuItems here --></div>
    <div id="board"></div>
  </div>
  <script type="module">
    import {createElement, component, component2, render} from './index.js';
  // Find elements by ID
    const root = document.getElementById('root');
    const head = document.getElementById('head');
    const board = document.getElementById('board');

  // head 

    const headstateData = [
      { hash: '#home', text: 'Home', name: "Home" },
      { hash: '#team', text: 'Team', name: "Team" },
      { hash: '#member', text: 'Member', name: "Member" },
      { hash: '#purpose', text: 'Purpose', name: "Purpose" },
    ];
    const headvirtualDom = component(headstateData);
    const headcontainer = document.getElementById('head');
    headcontainer.appendChild(render(headvirtualDom));

    
  // board 
    window.addEventListener('hashchange', () => { 
      // window.location 객체는 현재 url에 대한 정보를 제공한다
      // hash 속성은 url의 해시 부분을 반환한다
      
      // target
      const board = document.getElementById('board');  
      // 예를 들어, http://example.com#page1 이라는 url이 있다면, hash 속성은 #page1을 반환한다
      // substr() 메서드는 문자열에서 특정 위치에서 시작하여 특정 문자 수만큼의 문자들을 반환한다
      // #을 제외한 문자열을 반환하기 위해 substr(1)을 사용한다
      // <a> 태그의 href 속성에는 #page1, #page2, #page3, #page4가 있다
      const hash = window.location.hash.substr(1);
      // if (hash === 'page1') {} // else if(hash === 'page2') {}
      // if() 조건문의 패턴을 뒤로하고, switch문을 사용했다.
      // switch()문자체가 '일관된 조건식'을 뉘앙스로 설명하기 때문에
      // '모두 읽지 않아도' 어떤 작용을 해낸다는 것을 알게 된다

      switch (hash) {
        case 'home' : 
          board.innerHTML = component2('h1 ', { style: 'color:blue;'}, ["this is Page 1"])
          break;
        case 'team' :
          board.innerHTML = component2('h1 ', {style:'background-color:cadetblue;'}, [component2('h1', {}, ['this is page2'])]);
          break;
        case 'member' :
          board.innerHTML = 
          component2('div ', { 
            style: 'display:flex; justifly-content:center; color:#ff2222; width: 25vw; height: 85vh; color: aliceblue;'}, 
              [component2('h1 ', {}, ['this is page3'])])
          break;
        case 'purpose' :
          board.innerHTML = component2('div ', { style: 'display:flex; justifly-content:center; color:#333;'}, [component2('h1', {}, ['this is page4'])])
            break;

        default : 
          // 조건이 모두 다 부합하지 않을때, 즉 false 일때 default가 실행된다. 
          // 최초 접속에는 hash가 없기 때문에 default가 실행된다
          board.innerHTML = component2('h1 ', {}, ["반갑습니다. 접속 할때 보이는 페이지(처럼보이는) element입니다"]);
          // 아래의 dispatchEvent()를 사용하지 않으면, 해당 코드가 실행되지 않는다
        }
      });
    // 초기 로딩을 위한 코드
    window.dispatchEvent(new Event('hashchange'));
  </script>
</body>

</html>